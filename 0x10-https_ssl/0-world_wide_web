#!/usr/bin/env bash
# Audit domain and subdomain records.

domain="$1"
subdomain="$2"

# Function to retrieve record information
get_record_info() {
    local sub="$1"
    local rec=$(dig "$sub.$domain" | awk 'NR==13 { print $4 }')
    local ip=$(dig "$sub.$domain" | awk 'NR==13 { print $5 }')
    echo "The subdomain $sub is a '$rec' record and points to '$ip'"
}

# Check if subdomain is provided
if [ -n "$subdomain" ]; then
    get_record_info "$subdomain"
else
    subdomains=("www" "lb-01" "web-01" "web-02")
    for sub in "${subdomains[@]}"; do
        get_record_info "$sub"
    done
fi
